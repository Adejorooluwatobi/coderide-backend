import { createParamDecorator, ExecutionContext } from '@nestjs/common';\nimport { PaginationParams } from '../interfaces/api-response.interface';\n\nexport const Pagination = createParamDecorator(\n  (data: unknown, ctx: ExecutionContext): PaginationParams => {\n    const request = ctx.switchToHttp().getRequest();\n    const { page = 1, limit = 10, sortBy, sortOrder = 'desc' } = request.query;\n\n    return {\n      page: Math.max(1, parseInt(page as string, 10)),\n      limit: Math.min(100, Math.max(1, parseInt(limit as string, 10))),\n      sortBy: sortBy as string,\n      sortOrder: sortOrder as 'asc' | 'desc',\n    };\n  },\n);\n\nexport function createPaginatedResponse<T>(\n  data: T[],\n  total: number,\n  page: number,\n  limit: number,\n) {\n  return {\n    data,\n    pagination: {\n      page,\n      limit,\n      total,\n      totalPages: Math.ceil(total / limit),\n    },\n  };\n}\n